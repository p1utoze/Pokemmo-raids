{% extends "base.html" %}

{% block admin_sidebar %}
<a href="/" class="back-link">‚Üê Back to Public View</a>
<h3 class="admin-title">Admin Panel</h3>
<div class="sidebar-actions" style="display: flex; justify-content: flex-end; margin-bottom: 8px;">
    <button id="manage-seasons-btn" class="button btn-secondary" style="padding: 6px 10px;">Manage Seasons</button>
</div>
<div class="admin-info">
    <label for="season-select-sidebar" style="margin-top: 12px;">Select Season</label>
    <div class="season-button-stack" id="season-select-sidebar">
        {% for s in seasons %}
        <button class="season-select-btn" data-season="{{ s.Code }}" id="season-{{ s.Code }}">{{ s.Label }}</button>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block content %}
<link rel="stylesheet" href="/static/css/admin.css?v=2">
<section class="admin-shell" data-initial-season="{% if seasons %}{{ seasons.0.Code }}{% endif %}">
    <h1>Admin Panel</h1>
    <div class="admin-header-row">
        <div class="season-chip" id="selected-season-label">Season: {% if seasons %}{{ seasons.0.Label }}{% endif %}
        </div>
        <button id="set-default-season" class="button btn-secondary">Set as Default</button>
        <div class="admin-header-spacer"></div>
        <a href="/auth/change" class="button btn-secondary">Change Password</a>
        <a href="/admin/logout" class="button btn-secondary">Logout</a>
    </div>
    <div class="admin-tab-bar">
        <button id="tab-checklist" class="admin-tab-btn active" data-tab="checklist">Checklist</button>
        <button id="tab-raid-bosses" class="admin-tab-btn" data-tab="raid-bosses">Raid Bosses</button>
        <button id="tab-users" class="admin-tab-btn" data-tab="users">Users</button>
    </div>
    <div id="admin-app">
        <!-- Admin UI populated by JS -->
    </div>
</section>
<script>
    // Pass user role to JavaScript for conditional UI
    window.USER_ROLE = "{{ user_role|default:'' }}";
</script>
<script src="/static/js/admin.js"></script>
{% endblock %}