{% extends "base.html" %}

{% block sidebar %}
<div class="boss-cards">
    {% for boss in season.RaidBosses %}
    <div class="boss-card" data-name="{{ boss.Name }}">
        <a href="/boss?name={{ boss.Name }}" class="boss-link">
            <div class="boss-card-title">{{ boss.Name }} {{ boss.Stars }}â˜…</div>
            <div class="boss-card-desc">{{ boss.Description }}</div>
        </a>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block content %}
<div class="auth-top-bar">
    {% if user_role %}
    <div class="auth-chip">Logged in as <strong>{{ user_role }}</strong></div>
    <a class="auth-btn" href="/admin">Admin Panel</a>
    <a class="auth-btn" href="/build-team">Team Builder</a>
    <a class="auth-btn ghost" href="/auth/logout">Logout</a>
    {% else %}
    <div class="auth-chip muted">Staff Login</div>
    <a class="auth-btn" href="/auth/login">Login</a>
    {% endif %}
</div>

<div id="page-data" data-user-role="{{ user_role|default:'' }}" style="display: none;"></div>

<section class="hero">
    <h1>{{ season.SeasonName }}</h1>
    <p class="lead">Select a boss on the left to view variations and turn-by-turn plans.</p>
</section>


<section class="checklist-section">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
        <h2 style="margin: 0;">Pokemon Checklist</h2>
        <button class="view-more" id="viewLegendBtn">View Legend</button>
    </div>
    <div id="checklist-container" class="checklist-container">
        <!-- Populated by JavaScript -->
    </div>
</section>

<aside class="right-sidebar" id="checklistLegendSidebar" aria-hidden="true">
    <button class="close-sidebar" id="closeLegendSidebar">âœ•</button>
    <div class="sidebar-inner">
        <h3>Usage Legends</h3>
        <div class="legend-item">
            <h4>PHYSICAL</h4>
            <ul class="info-list">
                <li><strong>IVs:</strong> 31 ATK, SPE, HP</li>
                <li><strong>EVs:</strong> 252 ATK, 252 SPE</li>
                <li><strong>Nature:</strong> Adamant</li>
            </ul>
        </div>
        <div class="legend-item">
            <h4>SPECIAL</h4>
            <ul class="info-list">
                <li><strong>IVs:</strong> 31 SPATK, SPE, HP</li>
                <li><strong>EVs:</strong> 252 SPATK, 252 SPE</li>
                <li><strong>Nature:</strong> Modest</li>
            </ul>
        </div>
        <div class="legend-item">
            <h4>UTILITY</h4>
            <ul class="info-list">
                <li><strong>IVs:</strong> 31 HP, SPE</li>
                <li><strong>EVs:</strong> 252 HP, 252 SPE</li>
                <li><strong>Nature:</strong> Modest</li>
            </ul>
        </div>
    </div>
</aside>

<div class="team-credits">
    <h2 class="team-credits__title">Built by Skyfall PokeMMO Team</h2>
    <p class="team-credits__desc">Guides, data, and team builds are authored with care by the Skyfall PokeMMO Team. We appreciate their work keeping raid strategies fresh and accurate. Special thanks to the Skyfall community for their ongoing support.</p>
    <a href="https://discord.gg/gjSNmBmu4j" class="auth-btn team-credits__cta" target="_blank" rel="noopener noreferrer">
        <span class="discord-icon">ðŸ’¬</span>
        Join the Skyfall Discord
    </a>
</div>

<script>
    // Pass user role to JavaScript for checklist editor
    document.body.dataset.userRole = "{{ user_role|default:'' }}";
</script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
<script src="/static/js/checklist.js?v={{ commit_hash }}"></script>
<script src="/static/js/boss-edit.js?v={{ commit_hash }}"></script>
<script src="/static/js/checklist-edit.js?v={{ commit_hash }}"></script>
{% endblock %}