{% extends "base.html" %}

{% block sidebar %}
<div class="boss-cards">
    {% for boss in season.RaidBosses %}
    <div class="boss-card" data-name="{{ boss.Name }}">
        <a href="/boss?name={{ boss.Name }}" class="boss-link">
            <div class="boss-card-title">{{ boss.Name }} {{ boss.Stars }}â˜…</div>
            <div class="boss-card-desc">{{ boss.Description }}</div>
        </a>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block content %}
<div class="auth-top-bar">
    {% if user_role %}
    <div class="auth-chip">Logged in as <strong>{{ user_role }}</strong></div>
    <a class="auth-btn" href="/admin">Admin Panel</a>
    <a class="auth-btn" href="/build-team">Team Builder</a>
    <a class="auth-btn ghost" href="/auth/logout">Logout</a>
    {% else %}
    <div class="auth-chip muted">Staff Login</div>
    <a class="auth-btn" href="/auth/login">Login</a>
    {% endif %}
</div>

<div id="page-data" data-user-role="{{ user_role|default:'' }}" style="display: none;"></div>

<section class="hero">
    <h1>{{ season.SeasonName }}</h1>
    <p class="lead">Select a boss on the left to view variations and turn-by-turn plans.</p>
</section>

<section class="checklist-section">
    <h2>Pokemon Checklist</h2>
    <div id="checklist-container" class="checklist-container">
        <!-- Populated by JavaScript -->
    </div>
</section>

<script>
    // Pass user role to JavaScript for checklist editor
    document.body.dataset.userRole = "{{ user_role|default:'' }}";
</script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
<script src="/static/js/checklist.js"></script>
<script src="/static/js/boss-edit.js"></script>
<script src="/static/js/checklist-edit.js"></script>
{% endblock %}